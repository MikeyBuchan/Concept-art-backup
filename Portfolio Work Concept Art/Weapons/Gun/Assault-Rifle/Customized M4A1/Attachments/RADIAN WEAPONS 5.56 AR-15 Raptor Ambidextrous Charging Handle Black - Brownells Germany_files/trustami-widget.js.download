var trustami_debug=0;var trustamiWidget=new trustamiWidgetClass();if(!trustamiWidget.scriptCheck()){trustamiWidget.sendJsonpRequest(trustamiWidget.getTrustamiURI(),function success(){if(trustami_debug){console.log("jsonp request sent")}})}function supportsQuerySelectors(){return(document.querySelector&&document.querySelectorAll)!=null}function trustamiWidgetClass(){var h="9_7";var K="app";var J="https://cdn.trustami.com/widgetapi/widget2";var L="https://app.trustami.com/widgetapi";var w="https://cdn.trustami.com/widgetapi/widget2/img";var c="https://app.trustami.com/data-api/widget-incident";var F=document.getElementById("trustamiwidget");F=!F?document.querySelector('script[src*="widget2/trustami-widget.js"]'):F;var B=F.getAttribute("src");var r=getSrcUrlParams(F);var t;var p;var d;var b;var y;var q;var n;var v;var A;var o;var x;var H;var C;var f=false;var I;var e;var s=false;var l;var D=true;var G=true;var j;var m=F.getAttribute("onChangeTarget");if(m){if(m.indexOf(".")==0){m=m.substring(1,m.length)}var a=document.getElementsByClassName(m)[0];if(a){var g=F;a.onchange=function(){var i=this.options[this.selectedIndex].value;g.setAttribute("profile",i);trustamiWidget=new trustamiWidgetClass();trustamiWidget.sendJsonpRequest(trustamiWidget.getTrustamiURI(),function M(){if(trustami_debug){console.log("Refresh initialised.")}})}}}if(r&&r.profile&&r.platform){t=r.profile;p=r.languageid;b=r.user;y=r.platform;d=r.plugin;q=r.colorcode;n=r.mode;v=r.widgetData;A=r.widgetCfg;o=r.icon;x=r.callback;H=r.googleStars;l=r.noredis;D=r.pushdivs;j=r.custom}else{if(F.hasAttribute("data-profile")){t=F.dataset?F.dataset.profile:F.getAttribute("data-profile")}else{t=F.getAttribute("profile")}if(F.hasAttribute("data-languageid")){p=F.dataset?F.dataset.languageid:F.getAttribute("data-languageid")}else{p=F.getAttribute("languageid")}if(F.hasAttribute("data-user")){b=F.dataset?F.dataset.user:F.getAttribute("data-user")}else{b=F.getAttribute("user")}if(F.hasAttribute("data-platform")){y=F.dataset?F.dataset.platform:F.getAttribute("data-platform")}else{y=F.getAttribute("platform")}if(F.hasAttribute("data-plugin")){d=F.dataset?F.dataset.plugin:F.getAttribute("data-plugin")}else{d=F.getAttribute("plugin")}if(F.hasAttribute("data-colorcode")){q=F.dataset?F.dataset.colorcode:F.getAttribute("data-colorcode")}else{q=F.getAttribute("colorcode")}if(F.hasAttribute("data-mode")){n=F.dataset?F.dataset.mode:F.getAttribute("data-mode")}else{n=F.getAttribute("mode")}if(F.hasAttribute("data-widgetdata")){v=F.dataset?F.dataset.widgetdata:F.getAttribute("data-widgetdata")}else{v=F.getAttribute("widgetdata")}if(F.hasAttribute("data-widgetcfg")){A=F.dataset?F.dataset.widgetcfg:F.getAttribute("data-widgetcfg")}else{A=F.getAttribute("widgetcfg")}if(F.hasAttribute("data-icon")){o=F.dataset?F.dataset.icon:F.getAttribute("data-icon")}else{o=F.getAttribute("icon")}if(F.hasAttribute("data-callback")){x=F.dataset?F.dataset.callback:F.getAttribute("data-callback")}else{x=F.getAttribute("callback")}if(F.hasAttribute("data-googlestars")){H=F.dataset?F.dataset.googlestars:F.getAttribute("data-googlestars")}else{H=F.getAttribute("googlestars")}if(F.hasAttribute("data-noredis")){l=F.dataset?F.dataset.noredis:F.getAttribute("data-noredis")}else{l=F.getAttribute("noredis")}if(F.hasAttribute("data-pushdivs")){D=F.dataset?F.dataset.pushdivs:F.getAttribute("data-pushdivs")}else{D=F.getAttribute("pushdivs")}if(F.hasAttribute("data-custom")){j=F.dataset?F.dataset.custom:F.getAttribute("data-custom")}else{j=F.getAttribute("custom")}}if(trustami_debug){console.log("trustami_mode:"+n);console.log("trustami_input_params: trustami_userid->"+t+" trustami_hash->"+b+" trustami_languageid->"+p+" trustami_nw->"+y+" trustami_plugin_type->"+d+" trustami_mode->"+n+" trustami_widgetdata->"+v+" trustami_widgetcfg->"+A+" trustami_icon->"+o+" trustami_googleStars->"+H+" trustami_noredis->"+l+" trustami_pushdivs->"+D)}if(n==null||n==""){n=null}else{var k=n.split(",");var z=n.split(",");if(trustami_debug){console.log("inputMode:"+k)}if(trustami_debug){console.log("filteredMode:"+z)}for(var E=0;E<k.length;E++){if(k[E]!=0&&k[E]!=1&&k[E]!=2&&k[E]!=3&&k[E]!=4&&k[E]!=5&&k[E]!=6&&k[E]!=7&&k[E]!=8&&k[E]!=9&&k[E]!=15&&k[E]!=16&&k[E]!=17&&k[E]!=18&&k[E]!=19&&k[E]!=20&&k[E]!=21&&k[E]!=22){var u=z.indexOf(k[E]);z.splice(u,1)}}if(!z.length){n="0"}else{n=z.toString()}n="["+n+"]"}if(trustami_debug){console.log("trustami_mode:"+n)}this.setLanguageId=function(i){p=i};this.setMode=function(i){n="["+i+"]"};this.scriptCheck=function(){if(supportsQuerySelectors()&&document.querySelectorAll("#trustamiwidget").length>1){if(trustami_debug){console.warn(1)}this.logger(t,1,y);return 1}return 0};this.getTrustamiURI=function(){var P="";var i="profile="+t+(p?"&languageid="+p:"")+"&user="+b+"&platform="+y+(q?"&colorcode="+q:"")+"&mode="+n+"&v=0"+(A?"&cfg="+A:"")+"&type=2"+(H?"&googleStars="+H:"")+"&version="+h+(d?"&pluginType="+d:"")+(l?"&noRedis="+l:"")+(D?"&pushDivs="+D:"");var M="https://"+K+".trustami.com/#/signup?widgetuid="+t+"&widgethash="+b;var N=0;if((!t||0===t.length)&&v!=null){i="widgetData="+v+"&platform="+y+"&mode="+n+"&v=1"+(A?"&cfg="+A:"")+"&type=2"+(H?"&googleStars="+H:"")+"&version="+h;M="https://"+K+".trustami.com/#/signup?widgetnw="+y+"&widgetdata="+v;N=1}var O=L+"/widgetapi-multi.php?callback=trustamiWidget.processRequest&"+i;if(trustami_debug){console.log(O)}if(r.cache=="off"){O+="&trCache="+Date.now()}return encodeURI(O)};this.processRequest=function(P){G=true;if(P==false||P==undefined||P==null){if(trustami_debug){console.log(P)}console.log("ERR: something went wrong here, no data received")}else{if(P&&(typeof P==="object")){var Y=[],M,T;for(var X in P){if(P.hasOwnProperty(X)){Y.push(X)}}T=Y.length;if(P.hasOwnProperty("cfg")){T-=1;if(P.cfg["plugin"]=="epages"||P.cfg["plugin"]=="epages-now"){e=1}}if(P.hasOwnProperty("google")){if(P.cfg&&P.cfg.jsonLd&&P.google&&P.google.length){var Q=document.getElementById("trustamiJsonLd");if(!Q){var W=document.head||document.getElementsByTagName("head")[0],S=document.createElement("script");S.setAttribute("id","trustamiJsonLd");S.type="application/ld+json";S.appendChild(document.createTextNode(P.google));W.appendChild(S);if(trustami_debug){console.log("jsonLd appended")}}else{if(trustami_debug){console.log("jsonLd script already existing")}}C=0}else{if(P.google){C=P.google}}T-=2}if(trustami_debug){console.log(P)}if(P.hasOwnProperty("action")&&P.action=="none"){if(trustami_debug){console.log("Data not found, please make sure you have set your trustami parameters correctly.")}}else{if(trustami_debug){console.log("keysLength"+T+", keys"+Y)}if(P.cfg.hasOwnProperty("pushDivs")){D=P.cfg["pushDivs"]}var V=document.getElementById("trustami-mobile-view");var O=document.getElementById("trustami-stars-badge-mobile-view");if(V||O){if(V){V.parentNode.removeChild(V)}var U=document.getElementById("trustami-overlay-css");if(U){U.parentNode.removeChild(U)}if(O){O.parentNode.removeChild(O)}U=document.getElementById("trustami-stars-badge-css");if(U){U.parentNode.removeChild(U)}}for(var R=0;R<T;R++){if(trustami_debug){console.log("keys[i]->"+Y[R]+" obj->"+P[Y[R]])}if(!P[Y[R]].cfg.mode||(P[Y[R]].cfg.mode&&P[Y[R]].cfg.mode==0)){if(document.getElementById("widget_container")||document.getElementById("widget_container_icon")||document.getElementsByClassName("widget_container").length){M="widget_container";this.trustami_print_html(P[Y[R]],M);if(!P[Y[R]].cfg.fixedHeight&&P[Y[R]].action=="show"){f=false;this.iframeResize(M,1)}else{f=true;this.iframeResize(M,0)}}else{if(trustami_debug){console.warn("0")}this.logger(t,0,y,"widget_container")}}else{if(P[Y[R]].cfg.mode==1){if(document.getElementById("widget_container")||document.getElementsByClassName("widget_container_badge").length){M="widget_container_badge";this.trustami_print_html(P[Y[R]],M)}else{if(trustami_debug){console.warn("0")}this.logger(t,0,y,"widget_container_badge")}}else{if(P[Y[R]].cfg.mode==6){s=true;M="widget_container_overlay";this.trustami_print_html(P[Y[R]],M)}else{if(P[Y[R]].cfg.mode==7){if(document.getElementById("widget_container")||document.getElementsByClassName("widget_container_box").length){M="widget_container_box";this.trustami_print_html(P[Y[R]],M)}else{if(trustami_debug){console.warn("widget_container_box")}this.logger(t,0,y,"widget_container_box")}}else{if(P[Y[R]].cfg.mode==8){s=true;M="widget_container_frame";this.trustami_print_html(P[Y[R]],M)}else{if(P[Y[R]].cfg.mode==9){s=true;M="widget_container_overlay_list";this.trustami_print_html(P[Y[R]],M)}else{if(P[Y[R]].cfg.mode==15){if(P[Y[R]].cfg.displayType=="overlay"){s=true}M="widget_container_overlay_sticker";this.trustami_print_html(P[Y[R]],M)}else{if(P[Y[R]].cfg.mode==16){if(document.getElementsByClassName("widget_container_text_only").length){M="widget_container_text_only";this.trustami_print_html(P[Y[R]],M)}else{if(trustami_debug){console.warn("0")}this.logger(t,0,y,"widget_container_text_only")}}else{if(P[Y[R]].cfg.mode==17){if(P[Y[R]].cfg.displayType=="overlay"){s=true}M="widget_container_simple_badge";this.trustami_print_html(P[Y[R]],M)}else{if(P[Y[R]].cfg.mode==18){if(P[Y[R]].cfg.displayType=="overlay"){s=true}M="widget_container_social_badge";this.trustami_print_html(P[Y[R]],M)}else{if(P[Y[R]].cfg.mode==19){if(P[Y[R]].cfg.displayType=="overlay"){s=true}M="widget_container_combi_badge";this.trustami_print_html(P[Y[R]],M)}else{if(P[Y[R]].cfg.mode==20){if(P[Y[R]].cfg.displayType=="overlay"){s=true}M="widget_container_shopauskunft";this.trustami_print_html(P[Y[R]],M)}else{if(P[Y[R]].cfg.mode==21){if(P[Y[R]].cfg.displayType=="overlay"){s=true}M="widget_container_stars_badge";this.trustami_print_html(P[Y[R]],M)}else{if(P[Y[R]].cfg.mode==22){M="widget_container_comments_badge";this.trustami_print_html(P[Y[R]],M)}}}}}}}}}}}}}}}var N=document.querySelectorAll("[class^=widget_container]");if(N){for(var R=0;R<N.length;R++){if(!N[R].childElementCount){if(trustami_debug){console.warn("3")}this.logger(t,3,y,N[R].className)}}}}}else{if(trustami_debug){console.log("Incorrect data received: please check your Trustami parameters.")}}}};this.adjustIframeHeight=function(M,i){if(trustami_debug){console.log("Trustami_Container width: "+M)}if(!M){M=201}if(M<=200){i=(isIE()?"277px":"276px")}else{if(M>200&&M<935){i="190px"}else{if(M>=935){i="100px"}else{if(trustami_debug){console.log("Error: Trustami Container width")}}}}return i};this.attachTopMobileOverlay=function(i,U){var V="36px";var P="100%";var O="position:relative;";var T="z-index: "+U.position["z-index"]+" !important; background-position: 100% 100%; width:"+P+";height:"+V+"; right:0px;";var S="float:right; right:0px; background-position: 100% 100%; height:"+V+";";var N=document.createElement("div");var Q="trustami-mobile-view";var M="widget_container_overlay_mobile";var R="widget_container_overlay";if(U.mode==21){Q="trustami-stars-badge-mobile-view";M="widget_container_stars_badge_mobile";R="widget_container_stars_badge"}N.setAttribute("id",Q);N.setAttribute("class",M);if(U.mobile["vertical"]["pos"]=="bottom"){T+="position:fixed;bottom:0px;";S+="position:fixed;bottom:0px;";N.setAttribute("style",O);document.body.appendChild(N)}else{T+="position:fixed;top:0px;";S+="position:fixed;top:0px;";N.setAttribute("style",O);if(document.body.childNodes){document.body.insertBefore(N,document.body.childNodes[0])}else{document.body.appendChild(N)}}this.attachIframe(N,i,T);this.setClosebtn(N,U,S);this.hideOnWindowsWidth(N,U,R,M)};this.hideOnWindowsWidth=function(P,R,M,O){if(R.hasOwnProperty("width")&&R.width&&R.width.hasOwnProperty("min-width")&&R.width["min-width"]>0){var i=document.createElement("style"),N="."+O+"{height:36px; position: relative; display:none;}."+O+" > span {display:none;}";N+=" @media screen and (max-width: "+R.width["min-width"]+"px) {."+M+"{display:none;}."+O+"{display:block;} ."+O+" > span {display:block;}}";var Q="trustami-overlay-css";if(R.mode==21){Q="trustami-stars-badge-css"}i.type="text/css";i.setAttribute("id",Q);i.textContent=N;if(document.head){document.head.appendChild(i)}else{document.body.appendChild(i)}}};this.attachIframe=function(M,O,i){var N=document.createElement("iframe");this.checkDataCustom(j,N);N.setAttribute("seamless","seamless");N.setAttribute("frameborder","0");N.setAttribute("scrolling","no");N.style.cssText=i;if(O^0===O){N.setAttribute("src",L+"/widgetapi-multi.php?callback=trustamiWidget.processRequest&profile="+t+"&user="+b+"&platform=0&mode="+O+"&v=0&type=2&version="+h+"&callType=direct"+(d?"&pluginType="+d:""));M.appendChild(N)}else{function P(R){var Q=R.contentWindow.document||R.contentDocument.document||R.contentDocument;if((Q.body&&!Q.body.childElementCount)||!Q.body){Q.open();Q.write(O);Q.close()}}M.appendChild(N);P(N);if(N.addEventListener){N.addEventListener("load",function(){P(this)},false)}else{if(N.attachEvent){N.attachEvent("onload",function(){P(this)})}else{N.onload=function(){P(this)}}}}};this.checkDataCustom=function(i,N){if(i){i=i.replace(/\+/g,"%20");var P=decodeURIComponent(i);P=P.replace(/\'/g,'"');var M=JSON.parse(P);for(var O in M){if(M[O]!==undefined){N.setAttribute(O,M[O])}}}};this.sendJsonpRequest=function(M,O){var i=document.createElement("script");this.checkDataCustom(j,i);i.src=M;var N=document.getElementsByTagName("head")[0];i.onload=i.onreadystatechange=function(Q){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"){if(trustami_debug){console.log("jsonp request set up: ");console.log(Q)}O();i.onload=i.onreadystatechange=null;try{if(i.parentNode===N){N.removeChild(i)}else{console.warn("Trustami script request error: could not remove head node")}}catch(P){console.warn("Trustami script request error: "+P.message)}}};N.appendChild(i);if(trustami_debug){console.log(i)}};this.trustami_print_html=function(aq,ac){if(trustami_debug){console.log(aq,ac)}var U=document.getElementsByClassName(ac),aP=null;if(!U.length){if((aq.cfg["mode"]==15||aq.cfg["mode"]==17||aq.cfg["mode"]==18||aq.cfg["mode"]==19||aq.cfg["mode"]==20||aq.cfg["mode"]==21)&aq.cfg["displayType"]!="overlay"){if(trustami_debug){console.log("0")}this.logger(t,0,y,ac);return}if(s){if(D){s=false;var aD=document.createElement("div");aD.className=ac;if(document.body){document.body.appendChild(aD);U=[aD]}else{window.onload=function(){document.body.appendChild(aD);U=[aD]}}}else{if(trustami_debug){console.log("0")}this.logger(t,0,y,ac);return}}}if(aq.cfg["mode"]==0||aq.cfg["mode"]==1||(aq.cfg["mode"]==7&&!U.length)){aP=document.getElementById("widget_container");if(aP&&aP.children.length){aP=null}}for(var aR=0;aR<U.length;aR++){U[aR].innerHTML=""}if(aq.cfg["mode"]==0&&ac=="widget_container"&&aq.text&&aq.text.length){var ap=B.substring(0,B.indexOf("widget2"));if(aq.text.indexOf("widget2/javascripts/bootstrap.min.js")<0){var ae='<script type="text/javascript" src="'+ap+'widget2/javascripts/bootstrap.min.js"><\/script>';aq.text=aq.text.replace("</head>",ae+"</head>")}if(y==48){var aC="#68C3A3";if(aq.iconValues&&aq.iconValues["posRatio"]){var aT=aq.iconValues["posRatio"];function aw(aZ,i){var a0=Math.pow(10,i||0);return Math.round(aZ*a0)/a0}aT=aw(aT,1);if(aT<50){aC="#D24D57"}else{aC="#68C3A3"}}var ak='<script type="text/javascript" src="'+ap+'widget2/javascripts/easyPieChart/jquery.easypiechart.js"><\/script><script type="text/javascript">function piechartinit(){ $(".chartred").easyPieChart({ //your options goes here \n animate: 2000, lineWidth: 6,lineCap: "square",size: 60,trackColor: "#e5e5e5", barColor: "'+aC+'", scaleColor: false});}$(function() {piechartinit();});<\/script>';aq.text=aq.text.replace("</head>",ak+"</head>")}}if(aq.cfg&&aq.cfg["targetId"]&&aq.cfg["targetId"].length>0){ac=aq.cfg["targetId"]}if(!o||0===o.length){o=false}else{if(o=="0"){o=false}else{o=true}}var ad=null;var at=null;if(aq.cfg){if(aq.cfg["icon"]){o=aq.cfg["icon"]}if(aq.cfg&&aq.cfg["height"]){ad=aq.cfg["height"]}if(aq.cfg&&aq.cfg["width"]){at=aq.cfg["width"]}}if(typeof aq.cfg["customCode"]!=="undefined"&&typeof aq.cfg["customCode"]["external"]!=="undefined"&&typeof aq.cfg["customCode"]["external"]["css"]!=="undefined"&&aq.cfg["customCode"]["external"]["css"].length){var au=aq.cfg["customCode"]["external"]["css"],ai=document.head||document.getElementsByTagName("head")[0],aK=document.createElement("style");aK.type="text/css";if(aK.styleSheet){aK.styleSheet.cssText=au}else{aK.appendChild(document.createTextNode(au))}ai.appendChild(aK)}var ax="";if(typeof aq.cfg["customCode"]!=="undefined"&&typeof aq.cfg["customCode"]["external"]!=="undefined"&&typeof aq.cfg["customCode"]["external"]["html"]!=="undefined"&&aq.cfg["customCode"]["external"]["html"].length){ax=aq.cfg["customCode"]["external"]["html"]}if(p==null){p=2}if(aq.cfg&&aq.cfg["lang"]&&aq.cfg["lang"]!=null){p=aq.cfg["lang"]}var Q="height: 300px; width: 100%; min-width: 100%;";if(aq.action&&aq.action==="show"){if(C&&C.length>0){if(aq.cfg&&aq.cfg["mode"]&&aq.cfg["mode"]===1){var aY="38";var az="";if(typeof aq.cfg.height!=="undefined"&&aq.cfg.height){aY=aq.cfg.height.match(/\d/g);aY=aY.join("");aY=aY/2}C=C.replace('<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: relative; height: 0px; z-index: -1; font-size: 5px; top: 38px">','<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: relative; height: 0px; z-index: -1; font-size: 5px; top: '+aY+'px; float: left; margin-right: 2px;">');if(aP){if(aP.getAttribute("style")){az+=aP.getAttribute("style")}az+=az+" max-width: 75px;";aP.setAttribute("style",az)}else{if(U.length){if(U[0].hasAttribute("style")){az+=U[0].getAttribute("style")}az=az+" max-width: 75px;";U[0].setAttribute("style",az)}}}if(aP){aP.innerHTML=C;C=0}else{if(U.length){U[0].innerHTML=C;C=0}}}if(aq.cfg&&aq.cfg["fixedHeight"]&&!aq.cfg["mode"]){Q+="display:block;";if(!ad){ad="100px"}Q=Q.replace("height: 300px;","height: "+ad+";");if(aq.text&&aq.text.length>0){for(var aR=0;aR<U.length;aR++){if(e){aq.text=aq.cfg["mode"]}this.attachIframe(U[aR],aq.text,Q);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}}if(aP){this.attachIframe(aP,aq.text,Q);if(ax.length){aP.insertAdjacentHTML("afterbegin",ax)}}}}else{if(aq.cfg&&aq.cfg["mode"]&&aq.cfg["mode"]===1){if(!ad){ad=75}if(!at){at=75}else{if((typeof at=="string"||at instanceof String)&&at.indexOf("px")>=0){at=at.substr(0,at.length-2)}ad=at}if(aq.text&&aq.text.length>0){Q=Q.replace("height: 300px; width: 100%; min-width: 100%;","height: "+ad+"px; width: "+at+"px;");if(aq.cfg["mode"]==1&&aP){if(!aP.getElementsByTagName("iframe")[0]){this.attachIframe(aP,aq.text,Q);if(ax.length){aP.insertAdjacentHTML("afterbegin",ax)}}}for(var aR=0;aR<U.length;aR++){this.attachIframe(U[aR],aq.text,Q);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}}}}else{if(aq.text.length){Q+="display:block;";if(U.length){for(var aR=0;aR<U.length;aR++){var af=Q.replace("height: 300px;","height: "+this.adjustIframeHeight(U[aR].clientWidth,ad)+";");if(e){aq.text=aq.cfg["mode"]}this.attachIframe(U[aR],aq.text,af);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}ad=0}}if(aP){Q=Q.replace("height: 300px;","height: "+this.adjustIframeHeight(aP.clientWidth,ad)+";");this.attachIframe(aP,aq.text,Q);if(ax.length){aP.insertAdjacentHTML("afterbegin",ax)}}}}}}else{if(aq.action&&aq.action==="overlay"){var T=0;if(aq.cfg&&aq.cfg["customCode"]&&aq.cfg["customCode"]["container"]){T=1}if(C&&C.length>0){if(trustami_debug){console.log(aP)}if(aP){aP.innerHTML=C;C=0}else{if(U.length){if(trustami_debug){console.log(U[0])}U[0].innerHTML=C;C=0}}}if(!ad){ad="184px"}if(!at||typeof at=="object"){at="110px"}var ay=0;if(aq.cfg&&aq.cfg["overlay"]&&aq.cfg["overlay"]["bottom"]){ay="bottom:"+aq.cfg["overlay"]["bottom"]}else{if(typeof aq.cfg["bottom"]!=="undefined"&&(aq.cfg["bottom"].length||typeof aq.cfg["bottom"]=="number")){ay="bottom:"+aq.cfg["bottom"]}else{if(aq.cfg["position"]&&aq.cfg["position"]["vertical"]&&aq.cfg["position"]["vertical"]["pos"]){ay=aq.cfg["position"]["vertical"]["pos"]+":"+aq.cfg["position"]["vertical"]["px"]+"px"}}}var R="right";var aF="0px";if(typeof aq.cfg["leftRightPadding"]!=="undefined"&&aq.cfg["leftRightPadding"]){aF=aq.cfg["leftRightPadding"]}else{if(!aq.cfg["leftRightPadding"]&&aq.cfg["position"]&&aq.cfg["position"]["horizontal"]&&aq.cfg["position"]["horizontal"]["pos"]){aF=aq.cfg["position"]["horizontal"]["px"]+"px"}}if(typeof aq.cfg["left"]!=="undefined"&&aq.cfg["left"]){R="left"}else{if(!aq.cfg["leftRightPadding"]&&aq.cfg["position"]&&aq.cfg["position"]["horizontal"]){R=aq.cfg["position"]["horizontal"]["pos"]}}var av=aq.cfg["position"];if(av.position&&av.margin){R=av.position;aF=av.margin}else{if(!aq.cfg["leftRightPadding"]&&aq.cfg["position"]&&aq.cfg["position"]["horizontal"]&&aq.cfg["position"]["horizontal"]["pos"]){R=aq.cfg["position"]["horizontal"]["pos"];aF=aq.cfg["position"]["horizontal"]["px"]+"px"}}Q="height: "+ad+"; width: "+at+";";if(aq.text&&aq.text.length){var aA="background-position: 100% 100%;display: block !important;z-index: "+aq.cfg["position"]["z-index"]+" !important;position: fixed;"+ay+";"+R+": "+aF+";";Q+=aA;if(Array.isArray(aq.text)){this.attachIframe(U[0],aq.text[0],Q);if(aq.cfg.hasOwnProperty("mobile")&&aq.cfg["mobile"].hasOwnProperty("enabled")&&aq.cfg["mobile"]["enabled"]&&G){G=false;if(aq.cfg["mobile"]["vertical"]["pos"]=="top"){if(document.readyState=="complete"){this.attachTopMobileOverlay(aq.text[1],aq.cfg)}else{window.onload=function(){this.attachTopMobileOverlay(aq.text[1],aq.cfg)}.bind(this)}}else{this.attachTopMobileOverlay(aq.text[1],aq.cfg)}}else{this.hideOnWindowsWidth(U[0],aq.cfg,ac,"widget_container_overlay_mobile")}}else{this.attachIframe(U[0],aq.text,Q);this.hideOnWindowsWidth(U[0],aq.cfg,ac,"widget_container_overlay_mobile")}var Z=R+": "+aF+";"+ay+";text-align: center;position: fixed;border-style: solid;line-height: 35px;font-weight: normal;";var ah=ad.match(/\d/g);ah=ah.join("");ah=ah-29;Z+="margin-bottom:"+ah+"px; border-width: 0px;";this.setClosebtn(U[0],aq.cfg,Z);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}}}else{if(aq.action&&aq.action==="boxed"){if(C&&C.length>0){C=C.replace('<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; float:right; font-size: 5px;">','<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; top: 50px; float:right; font-size: 5px;">');if(aP){aP.innerHTML=C;C=0}else{if(U.length){U[0].innerHTML=C;C=0}}}if(!ad&&!at){ad=300;at=208}else{if(!ad&&at){if((typeof at=="string"||at instanceof String)&&at.indexOf("px")>=0){at=at.substr(0,at.length-2)}ad=Math.round(at*1.44)}else{if(ad&&!at){if((typeof ad=="string"||ad instanceof String)&&ad.indexOf("px")>=0){ad=ad.substr(0,ad.length-2)}at=Math.round(ad/1.44)}else{ad=ad;at=at}}}Q="height: "+ad+"px; width: "+at+"px;";if(aq.text&&aq.text.length){for(var aR=0;aR<U.length;aR++){this.attachIframe(U[aR],aq.text,Q);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}}if(aP){this.attachIframe(aP,aq.text,Q)}}}else{if(aq.action&&aq.action==="frame"){if(trustami_debug){console.log("frame activated")}if(C&&C.length>0){C=C.replace('<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; float:right; font-size: 5px;">','<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; top: 50px; float:right; font-size: 5px;">');if(aP){aP.innerHTML=C;C=0}else{if(U.length){U[0].innerHTML=C;C=0}}}Q="display:block; z-index: "+aq.cfg["z-index"]+"; position:fixed;";if(aq.cfg["position"]=="top"){Q+="left: 0;top: 0;height: 47px;width: 100%;"}else{if(aq.cfg["position"]=="bottom"){Q+="left: 0;bottom: 0;height: 47px;width: 100%;"}else{if(aq.cfg["position"]=="left"){Q+="left: 0;top: 0;bottom: 0;height: 100%;width: 54px;"}else{if(aq.cfg["position"]=="right"){Q+="right: 0;top: 0;bottom: 0;height: 100%;width: 54px;"}}}}if(aq.cfg["width"]&&aq.cfg["width"]["min-width"]){var Y=document.createElement("style"),ar=" @media screen and (max-width: "+aq.cfg["width"]["min-width"]+"px) {.widget_container_frame{display:none;}}";Y.type="text/css";Y.textContent=ar;U[0].appendChild(Y)}if(aq.text.length){for(var aR=0;aR<U.length;aR++){if(e){aq.text=aq.cfg["mode"]}this.attachIframe(U[aR],aq.text,Q);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}}}}else{if(aq.action&&aq.action==="overlay_list"){if(trustami_debug){console.log("Overlay_List activated")}if(C&&C.length>0){C=C.replace('<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; float:right; font-size: 5px;">','<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; top: 50px; float:right; font-size: 5px;">');if(aP){aP.innerHTML=C;C=0}else{if(U.length){U[0].innerHTML=C;C=0}}}Q="display:block; z-index: "+aq.cfg["position"]["z-index"]+"; position:fixed;";if(aq.cfg["width"]&&aq.cfg["width"]["min-width"]){var Y=document.createElement("style"),ar=" @media screen and (max-width: "+aq.cfg["width"]["min-width"]+"px) {.widget_container_overlay_list{display:none;}}";Y.type="text/css";Y.textContent=ar;U[0].appendChild(Y)}if(aq.cfg["position"]){Q+=aq.cfg["position"]["horizontal"]["pos"]+" :"+aq.cfg["position"]["horizontal"]["px"]+"px;";Q+=aq.cfg["position"]["vertical"]["pos"]+" :"+aq.cfg["position"]["vertical"]["px"]+"px;"}var M=152;var O=45+(aq.cfg["position"]["vertical"]["px"]==0?2:4);O+=(aq.cfg["name"]?45:0);O+=(aq.cfg["stars"]?75:0);var aX=aq.cfg["elements"];for(var aR=0;aR<aX.length;aR++){if(aX[aR]["id"]=="ratings"){O+=110}else{if(aX[aR]["id"].indexOf("top")>=0){O+=46}else{if(aX[aR]["id"]){O+=46}}}}Q+="width :"+M+"px;";Q+="height :"+O+"px;";if(aq.text.length){for(var aR=0;aR<U.length;aR++){this.attachIframe(U[aR],aq.text,Q);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}}}}else{if(aq.action&&aq.action==="overlay_sticker"){if(trustami_debug){console.log("Overlay_Sticker activated")}if(C&&C.length>0){C=C.replace('<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; float:right; font-size: 5px;">','<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; top: 50px; float:right; font-size: 5px;">');if(aP){aP.innerHTML=C;C=0}else{if(U.length){U[0].innerHTML=C;C=0}}}Q=aq.cfg["displayType"]=="overlay"?"z-index: "+aq.cfg["position"]["z-index"]+"; position: fixed; display: block;":"position: relative;";if(aq.cfg["width"]&&aq.cfg["width"]["min-width"]){var Y=document.createElement("style"),ar=" @media screen and (max-width: "+aq.cfg["width"]["min-width"]+"px) {.widget_container_overlay_sticker{display:none;}}";Y.type="text/css";Y.textContent=ar;U[0].appendChild(Y)}var aj=105;var aQ=155;var N=205;if(aq.cfg["size"]=="small"){Q+="height: "+aj+"px;"}else{if(aq.cfg["size"]=="medium"){Q+="height: "+aQ+"px;"}else{Q+="height: "+N+"px;"}}if(aq.cfg["details"]!=2){if(aq.cfg["position"]["horizontal"]["pos"]=="left"){aq.cfg["position"]["horizontal"]["px"]+=1}Q+=aq.cfg["position"]["horizontal"]["pos"]+":"+aq.cfg["position"]["horizontal"]["px"]+"px;"}Q+=aq.cfg["position"]["vertical"]["pos"]+":"+aq.cfg["position"]["vertical"]["px"]+"px;";if(isIE()){I=aq.cfg["position"]["horizontal"]["pos"]=="right"?"right: 0px;":"left: 0px;";if(trustami_debug){console.log("sticker event functions defined")}function aU(){var i=this;i.style.cssText=i.style.cssText.replace(I,"");if(trustami_debug){console.log("sticker out "+I)}}function an(){var i=this;i.style.cssText+=I;if(trustami_debug){console.log("sticker in "+I)}}}var aL="";var aS=aq.cfg["position"]["horizontal"]["pos"]=="left"?204:202;var aO=aq.cfg["position"]["horizontal"]["pos"]=="left"?324:332;var aN=aq.cfg["position"]["horizontal"]["pos"]=="left"?454:452;if(aq.cfg["details"]==1||(aq.cfg["details"]==2&&aq.cfg["displayType"]!="overlay")){if(aq.cfg["size"]=="small"){aL="width: "+aS+"px;"}else{if(aq.cfg["size"]=="medium"){aL="width: "+aO+"px;"}else{aL="width: "+aN+"px;"}}Q+=aL}else{if(!aq.cfg["details"]){if(aq.cfg["size"]=="small"){aL="width: "+aj+"px"}else{if(aq.cfg["size"]=="medium"){aL="width: "+aQ+"px"}else{aL="width: "+N+"px;"}}Q+=aL}else{if(aq.cfg["details"]==2&&aq.cfg["displayType"]=="overlay"){var aG=aq.cfg["position"]["horizontal"]["px"];if(aq.cfg["size"]=="small"){aL=aq.cfg["position"]["horizontal"]["pos"]=="left"?"width: "+aS+"px; left: "+(aG-98)+"px;":"right: "+(aG-96)+"px; width: "+aS+"px;"}else{if(aq.cfg["size"]=="medium"){aL=aq.cfg["position"]["horizontal"]["pos"]=="left"?"width: "+aO+"px; left: "+(aG-168)+"px;":"right: "+(aG-176)+"px; width: "+aO+"px;"}else{aL=aq.cfg["position"]["horizontal"]["pos"]=="left"?"width: "+aN+"px; left: "+(aG-248)+"px;":"right: "+(aG-246)+"px; width: "+aN+"px;"}}var S="";if(aq.cfg["position"]["horizontal"]["pos"]=="left"){S="left:1px;"}else{S="right:0px;"}var aJ=0.5;var aM="ease";var V=".widget_container_overlay_sticker > iframe {"+aL+" transition:"+aJ+"s;-webkit-transition:"+aJ+"s;-moz-transition:"+aJ+"s; transition-timing-function:"+aM+" } .widget_container_overlay_sticker > iframe:hover{ "+S+"} ";Y=document.createElement("style");Y.type="text/css";if(Y.styleSheet){Y.styleSheet.cssText=V}else{Y.appendChild(document.createTextNode(V))}U[0].appendChild(Y)}else{Q+=aL}}}if(aq.text.length){for(var aR=0;aR<U.length;aR++){this.attachIframe(U[aR],aq.text,Q);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}if(isIE()&&aq.cfg["details"]==2&&aq.cfg["displayType"]=="overlay"){if(trustami_debug){console.log("Sticker mouse events attached")}try{U[aR].childNodes[U[aR].childNodes.length-1].removeEventListener("mouseout",aU,true);U[aR].childNodes[U[aR].childNodes.length-1].removeEventListener("mouseover",an,true);U[aR].childNodes[U[aR].childNodes.length-1].addEventListener("mouseout",aU,true);U[aR].childNodes[U[aR].childNodes.length-1].addEventListener("mouseover",an,true)}catch(aV){if(trustami_debug){console.log("Sticker: no mouse event supported")}}}else{if(isIE()){if(trustami_debug){console.log("sticker events should be removed")}U[aR].childNodes[U[aR].childNodes.length-1].removeEventListener("mouseout",aU,true);U[aR].childNodes[U[aR].childNodes.length-1].removeEventListener("mouseover",an,true)}}}}}else{if(aq.action&&aq.action==="text_only"){if(trustami_debug){console.log("text_only activated")}if(C&&C.length>0){C=C.replace('<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; float:right; font-size: 5px;">','<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; top: 50px; float:right; font-size: 5px;">');if(aP){aP.innerHTML=C;C=0}else{if(U.length){U[0].innerHTML=C;C=0}}}if(aq.text.length){for(var aR=0;aR<U.length;aR++){U[aR].insertAdjacentHTML("afterbegin",aq.text);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}}}}else{if(aq.action&&aq.action==="simple_badge"){if(trustami_debug){console.log("simple badge activated")}if(C&&C.length>0){C=C.replace('<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; float:right; font-size: 5px;">','<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; top: 50px; float:right; font-size: 5px;">');if(aP){aP.innerHTML=C;C=0}else{if(U.length){U[0].innerHTML=C;C=0}}}if(aq.text.length){Q="width: "+aq.cfg["width"]["size"]+"px; height: "+aq.cfg["width"]["size"]+"px; min-width: 11px;"+(aq.cfg["displayType"]=="overlay"?aq.cfg["position"]["horizontal"]["pos"]+": "+aq.cfg["position"]["horizontal"]["px"]+"px;"+aq.cfg["position"]["vertical"]["pos"]+": "+aq.cfg["position"]["vertical"]["px"]+"px;z-index: "+aq.cfg["position"]["z-index"]+"; position: fixed; display: block; ":"position: relative;");if(aq.cfg["displayType"]=="overlay"&&aq.cfg["width"]&&aq.cfg["width"]["min-width"]){var Y=document.createElement("style"),ar=" @media screen and (max-width: "+aq.cfg["width"]["min-width"]+"px) {.widget_container_simple_badge{display:none;}}";Y.type="text/css";Y.textContent=ar;U[0].appendChild(Y)}for(var aR=0;aR<U.length;aR++){this.attachIframe(U[aR],aq.text,Q);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}}}}else{if(aq.action&&aq.action==="social_badge"){if(trustami_debug){console.log("social badge activated")}if(C&&C.length>0){C=C.replace('<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; float:right; font-size: 5px;">','<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; top: 50px; float:right; font-size: 5px;">');if(aP){aP.innerHTML=C;C=0}else{if(U.length){U[0].innerHTML=C;C=0}}}if(aq.text.length){var M=110,O=140;var aX=aq.cfg["elements"];if(aX.length){O+=10+(aX.length*15);if(aq.cfg["legal"]){O+=45}}var Q="width :"+M+"px;height :"+O+"px;";Q+=aq.cfg["displayType"]=="overlay"?aq.cfg["position"]["horizontal"]["pos"]+": "+aq.cfg["position"]["horizontal"]["px"]+"px;"+aq.cfg["position"]["vertical"]["pos"]+": "+aq.cfg["position"]["vertical"]["px"]+"px;z-index: "+aq.cfg["position"]["z-index"]+"; position: fixed; display: block; ":"position: relative;";if(aq.cfg["displayType"]=="overlay"&&aq.cfg["width"]&&aq.cfg["width"]["min-width"]){var Y=document.createElement("style"),ar=" @media screen and (max-width: "+aq.cfg["width"]["min-width"]+"px) {.widget_container_social_badge{display:none;}}";Y.type="text/css";Y.textContent=ar;U[0].appendChild(Y)}for(var aR=0;aR<U.length;aR++){this.attachIframe(U[aR],aq.text,Q);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}}}}else{if(aq.action&&aq.action==="combi_badge"){if(trustami_debug){console.log("combi badge activated")}if(C&&C.length>0){C=C.replace('<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; float:right; font-size: 5px;">','<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; top: 50px; float:right; font-size: 5px;">');if(aP){aP.innerHTML=C;C=0}else{if(U.length){U[0].innerHTML=C;C=0}}}if(aq.text.length){var aa=60;if(aq.cfg["socialVersion"]==2||aq.cfg["socialVersion"]==3){aa=82}else{if(aq.cfg["socialVersion"]>3){aa=95;if(aq.cfg["legal"]){aa+=39}}}Q="width: 140px; height:"+aa+"px;"+(aq.cfg["displayType"]=="overlay"?aq.cfg["position"]["horizontal"]["pos"]+": "+aq.cfg["position"]["horizontal"]["px"]+"px;"+aq.cfg["position"]["vertical"]["pos"]+": "+aq.cfg["position"]["vertical"]["px"]+"px;z-index: "+aq.cfg["position"]["z-index"]+"; position: fixed; display: block; ":"position: relative;");if(aq.cfg["displayType"]=="overlay"&&aq.cfg["width"]&&aq.cfg["width"]["min-width"]){var Y=document.createElement("style"),ar=" @media screen and (max-width: "+aq.cfg["width"]["min-width"]+"px) {.widget_container_combi_badge{display:none;}}";Y.type="text/css";Y.textContent=ar;U[0].appendChild(Y)}for(var aR=0;aR<U.length;aR++){this.attachIframe(U[aR],aq.text,Q);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}}}}else{if(aq.action&&aq.action==="shopauskunft"){if(trustami_debug){console.log("shopauskunft activated")}if(C&&C.length>0){C=C.replace('<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; float:right; font-size: 5px;">','<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; top: 50px; float:right; font-size: 5px;">');if(aP){aP.innerHTML=C;C=0}else{if(U.length){U[0].innerHTML=C;C=0}}}Q="width: 177px; height: 240px;display:block; z-index: "+aq.cfg["position"]["z-index"]+"; position: fixed;";if(aq.cfg["width"]&&aq.cfg["width"]["min-width"]){var Y=document.createElement("style"),ar=" @media screen and (max-width: "+aq.cfg["width"]["min-width"]+"px) {.widget_container_shopauskunft{display:none;}}";Y.type="text/css";Y.textContent=ar;U[0].appendChild(Y)}if(aq.cfg["position"]){Q+=aq.cfg["position"]["horizontal"]["pos"]+" :"+aq.cfg["position"]["horizontal"]["px"]+"px;";Q+=aq.cfg["position"]["vertical"]["pos"]+" :"+aq.cfg["position"]["vertical"]["px"]+"px;"}if(aq.text.length){for(var aR=0;aR<U.length;aR++){this.attachIframe(U[aR],aq.text,Q);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}}}}else{if(aq.action&&aq.action==="stars_badge"){if(trustami_debug){console.log("stars badge activated")}if(C&&C.length>0){C=C.replace('<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; float:right; font-size: 5px;">','<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; top: 50px; float:right; font-size: 5px;">');if(aP){aP.innerHTML=C;C=0}else{if(U.length){U[0].innerHTML=C;C=0}}}Q="width: 240px; height: 150px;"+(aq.cfg["displayType"]=="overlay"?aq.cfg["position"]["horizontal"]["pos"]+": "+aq.cfg["position"]["horizontal"]["px"]+"px;"+aq.cfg["position"]["vertical"]["pos"]+": "+aq.cfg["position"]["vertical"]["px"]+"px;z-index: "+aq.cfg["position"]["z-index"]+"; position: fixed; display: block; ":"position: relative;");if(aq.cfg["displayType"]=="overlay"&&aq.cfg["width"]&&aq.cfg["width"]["min-width"]){var Y=document.createElement("style"),ar=" @media screen and (max-width: "+aq.cfg["width"]["min-width"]+"px) {.widget_container_stars_badge{display:none;}}";Y.type="text/css";Y.textContent=ar;U[0].appendChild(Y)}if(Array.isArray(aq.text)){this.attachIframe(U[0],aq.text[0],Q);if(aq.cfg.hasOwnProperty("mobile")&&aq.cfg["mobile"].hasOwnProperty("enabled")&&aq.cfg["mobile"]["enabled"]&&G){G=false;if(aq.cfg["mobile"]["vertical"]["pos"]=="top"){if(document.readyState=="complete"){this.attachTopMobileOverlay(aq.text[1],aq.cfg)}else{window.onload=function(){this.attachTopMobileOverlay(aq.text[1],aq.cfg)}.bind(this)}}else{this.attachTopMobileOverlay(aq.text[1],aq.cfg)}}}else{if(aq.text[0].length){this.attachIframe(U[0],aq.text,Q);this.hideOnWindowsWidth(U[0],aq.cfg,ac,"widget_container_stars_badge_mobile")}}}else{if(aq.action&&aq.action==="comments_badge"){if(trustami_debug){console.log("comments badge activated")}if(C&&C.length>0){C=C.replace('<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; float:right; font-size: 5px;">','<div id="org" itemtype="http://schema.org/LocalBusiness" itemscope="itemscope" style="position: absolute; z-index: -1; top: 50px; float:right; font-size: 5px;">');if(aP){aP.innerHTML=C;C=0}else{if(U.length){U[0].innerHTML=C;C=0}}}Q="width:100%;";if(aq.cfg["multiCol"]){Q+="height:290px;"}else{Q+="height:160px;"}if(aq.text.length){for(var aR=0;aR<U.length;aR++){this.attachIframe(U[aR],aq.text,Q);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}}}}else{if(aq.action&&aq.action!=="none"&&aq.action!=="show"){if(aq.text.length){for(var aR=0;aR<U.length;aR++){if(aq.cfg&&aq.cfg["fixedHeight"]){if(!ad){ad="100px"}Q=Q.replace("height: 300px;","height: "+ad+";")}else{if(U[aR].clientWidth<=200&&U[aR].clientWidth>0){if(!ad||ad!=""){ad="240px"}Q=Q.replace("height: 300px;","height: "+ad+";")}else{if(!ad){ad="100px"}Q=Q.replace("height: 300px;","height: "+ad+";")}}this.attachIframe(U[aR],aq.text,Q);if(ax.length){U[aR].insertAdjacentHTML("afterbegin",ax)}}if(aP){if(aq.cfg&&aq.cfg["fixedHeight"]){if(!ad){ad="100px"}Q=Q.replace("height: 300px;","height: "+ad+";")}else{if(aP.clientWidth<=200&&aP.clientWidth>0){if(!ad||ad!=""){ad="240px"}Q=Q.replace("height: 300px;","height: "+ad+";")}else{if(!ad){ad="100px"}Q=Q.replace("height: 300px;","height: "+ad+";")}}this.attachIframe(aP,aq.text,Q);if(ax.length){aP.insertAdjacentHTML("afterbegin",ax)}}if(!aq.cfg["fixedHeight"]){if(trustami_debug){console.log("remove resize")}f=true;this.iframeResize(ac,0)}else{if(trustami_debug){console.log("attached resize")}f=false;this.iframeResize(ac,1)}}}else{if(aq.action&&aq.action==="none"){if(trustami_debug){console.log("Nothing to show")}}}}}}}}}}}}}}}}var am=document.getElementById("widget_container_icon");if(o&&aq.iconValues&&am){o=false;var aI="";if(p==1){aI="Verified"}else{aI="Verifiziert"}var X="";var al=false;var P="";var aE="";var aW=aq.iconValues.ratingsNum;var ag="";if(aq.iconValues.profileLink){X=aq.iconValues.profileLink}if(aq.iconValues.userType.type==1){ag="p"}if(aq.iconValues.isVerified){al=aq.iconValues.isVerified}if(aq.iconValues.rankHover){var aH=aq.iconValues.rankHover;P=aH[p]}if(aq.iconValues.stars){aE=w+"/ranks/"+aq.iconValues.stars+ag+".png"}var aB="";aB+='<a target="_blank" href="'+X+'"><div style="border:0px; width:59px; height: 59px; line-height: 45px; font-size: 10px; text-align: center; background-repeat: no-repeat; background-size: 59px 59px; background-image: url('+aE+');">';if(al==true&&p==1){aB+='<p title="Verified by Trustami" class="icon_link_text_en">'+aW+"</p>"}else{if(al==true&&p==2){aB+='<p title="Nutzer durch Trustami verifiziert" class="icon_link_text_de">'+aW+"</p>"}else{if(p==2){aB+='<p class="icon_link_text_de" style="text-align: center;">'+aW+"</p>"}else{aB+='<p class="icon_link_text_en" style="text-align: center;">'+aW+"</p>"}}}aB+="</div></a>";var W=document.createElement("link");W.setAttribute("rel","stylesheet");W.setAttribute("href",J+"/stylesheets/trustami_icon.css");W.setAttribute("type","text/css");var ai=document.getElementsByTagName("head")[0];ai.appendChild(W);var ab=document.getElementById("widget_container_icon");if(C){ab.innerHTML=C+aB;C=0}else{ab.innerHTML=aB}}if(x&&x!==null){var ao=new Function("action",x+"( action );");ao(aq.action)}};this.iframeResize=function(M,P){var Q=this;var R=function(V){if(trustami_debug){console.log("FixedHeight:  "+f+" resize event: "+V.currentTarget+" on "+window)}if(f&&V.currentTarget&&V.currentTarget.addEventListener){V.currentTarget.removeEventListener(V.type,R,true)}else{if(f&&V.currentTarget&&V.currentTarget.attachEvent){V.currentTarget.detachEvent(V.type,R)}else{N=new Date();if(S===false){S=true;setTimeout(i,T)}}}};var O=function(V){if(trustami_debug){console.log("FixedHeight:  "+f+" resize event: "+V.currentTarget+" on "+window)}if(f&&V.currentTarget&&V.currentTarget.addEventListener){V.currentTarget.removeEventListener(V.type,O,true)}else{if(f&&V.currentTarget&&V.currentTarget.attachEvent){V.currentTarget.detachEvent(V.type,O)}else{N=new Date();if(S===false){S=true;setTimeout(U,T)}}}};var i=function(){if(new Date()-N<T){setTimeout(i,T)}else{S=false;var X=document.getElementsByClassName(M);var V=document.getElementById(M);if(X){for(var W=0;W<X.length;W++){var Y=X[W].getElementsByTagName("iframe")[0];if(Y){Y.style.height=Q.adjustIframeHeight(Y.offsetWidth,Y.offsetHeight)}}}if(V){var Y=V.getElementsByTagName("iframe")[0];Y.style.height=Q.adjustIframeHeight(Y.offsetWidth,Y.offsetHeight)}}};var U=function(){if(new Date()-N<T){setTimeout(U,T)}else{S=false;var Y=document.getElementsByClassName(M);var W=document.getElementById(M);if(Y){for(var X=0;X<Y.length;X++){var Z=Y[X].getElementsByTagName("iframe")[0];if(Z){var aa=Z.offsetWidth;var V=Z.offsetHeight;if(Z.clientWidth<=200&&Z.clientWidth>0){Z.style.height="240px"}else{Z.style.height="100px"}}}}if(W){var Z=W.getElementsByTagName("iframe")[0];if(Z){var aa=Z.offsetWidth;var V=Z.offsetHeight;if(Z.clientWidth<=200&&Z.clientWidth>0){Z.style.height="240px"}else{Z.style.height="100px"}}}}};var N;var S=false;var T=200;if(window.attachEvent){if(P==2){window.attachEvent("onresize",O)}else{if(P==1){window.attachEvent("onresize",R)}else{if(trustami_debug){console.log("resize iframe removed")}window.detachEvent("onresize",O);window.detachEvent("onresize",R)}}}else{if(window.addEventListener){if(P==2){window.addEventListener("resize",O,true)}else{if(P==1){window.addEventListener("resize",R,true)}else{if(trustami_debug){console.log("resize iframe removed")}window.removeEventListener("resize",R,true);window.removeEventListener("resize",O,true)}}}}};this.setClosebtn=function(M,R,O){if(R.hasOwnProperty("overlayClose")&&R.overlayClose){var i=O+"width: 20px;z-index: "+R.position["z-index"]+";cursor: pointer;border-color: #c7c7c7;background-color: transparent;color: #787878;";var Q=document.createElement("span");var P="widget_container_overlay_mobile";var N="widget_container_overlay";if(R.mode==21){P="widget_container_stars_badge_mobile";N="widget_container_stars_badge"}if(M.getAttribute("class")==P){if(R.mode==21){Q.setAttribute("id","taCloseBtnStarsMobile")}else{Q.setAttribute("id","taCloseBtnOverlayMobile")}}else{if(M.getAttribute("class")==N){Q.setAttribute("id","taCloseBtnOverlay")}}Q.setAttribute("style",i);Q.innerHTML=String.fromCharCode("10006");M.appendChild(Q);Q.addEventListener("click",function(){var S=this.parentNode;S.parentNode.removeChild(S)})}return false};this.logger=function(O,M,i,N){var P="Missing div element: "+N;if(M===1){P="Multiple JavaScripts. Please keep only one script tag."}else{if(M===3){P="Badge not activated in the account's settings: "+N}}console.warn("Trustami Warning => "+P);return true}}function hexToRgb(b){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null}function rgbToHex(d,c,a){return"#"+componentToHex(d)+componentToHex(c)+componentToHex(a)}function componentToHex(b){var a=b.toString(16);return a.length==1?"0"+a:a}function getSrcUrlParams(c){var b=c.getAttribute("src");if(!b){return{}}if(!(b.split("?")[1])){return{}}var e=b.split("?")[1].split("&"),f={};for(var a=0;a<e.length;a++){var d=e[a].split("=");f[d[0]]=d[1]}return f}function ieValid(){var d,b=3,e=document.createElement("div"),c=e.getElementsByTagName("i");while(e.innerHTML="<!--[if gt IE "+(++b)+"]><i></i><![endif]-->",c[0]){}var a=b>4?b:d;if(a===d){return true}else{if(a<9){return false}}return true}RegExp.escape=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};function isIE(){return/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent)};